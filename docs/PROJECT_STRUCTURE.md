# 项目结构说明

```
写稿Agent/
├── .claude/                          # Claude Code Skills 配置目录
│   ├── skills/                       # Skills 定义
│   │   ├── 澄清写作需求/
│   │   │   └── SKILL.md             # 需求澄清 Skill
│   │   ├── 调研资料/
│   │   │   └── SKILL.md             # 素材调研 Skill
│   │   ├── 风格建模/
│   │   │   └── SKILL.md             # 风格提取 Skill
│   │   ├── 写作执行/
│   │   │   └── SKILL.md             # 写作执行 Skill
│   │   └── 主编审稿/
│   │       └── SKILL.md             # 审稿 Skill
│   └── styles/                       # 风格库
│       └── 墨水怪风.md               # 示例风格文件
├── articles/                         # 文章输出目录
│   ├── temp_count.txt               # 临时字数统计文件
│   └── [标题]_[版本]稿.md           # 生成的文章
├── docs/                             # 文档目录
│   └── FAQ.md                       # 常见问题
├── CLAUDE.MD                         # 项目主配置文件（工作流定义）
├── README.md                         # 项目说明
├── CHANGELOG.md                      # 更新日志
├── CONTRIBUTING.md                   # 贡献指南
├── LICENSE                           # MIT 许可证
└── .gitignore                        # Git 忽略规则
```

## 核心文件说明

### CLAUDE.MD
项目的"大脑"，定义了：
- 完整工作流（5步流程）
- 硬性关卡规则
- 失败定义
- 最终原则

**重要性：⭐⭐⭐⭐⭐**

### .claude/skills/
所有 Skill 的定义文件，每个 Skill 是一个独立的功能模块。

**核心 Skills：**
| Skill | 功能 | 版本 |
|-------|------|------|
| writing-clarifier | 澄清写作需求 | v1.3.0 |
| research-expert | 调研素材 | v1.0.0 |
| style-modeler | 风格建模 | v2.0.0 |
| writing-executor | 写作执行 | v1.6.0 |
| editor-review | 主编审稿 | v1.1.0 |

### .claude/styles/
风格库，存放提取的写作风格。

**风格文件格式：**
```markdown
# 风格名称

## 风格画像
[一句话描述]

## 1. 核心人格与立场
[人设、态度、价值观]

## 2. 思维模式与论证逻辑
[论证结构]

...（共12个维度）

## 10. 独特习惯与招牌动作
[最具辨识度的写作习惯]

## 12. 典型段落模板
[可直接参考的段落示例]
```

### articles/
文章输出目录，所有生成的文章都保存在这里。

**文件命名规则：**
- 初稿：`标题_1稿.md`
- 修订稿：`标题_2稿.md`
- 最终稿：`标题_最终稿.md`

## 工作流程图

```
用户请求
    ↓
┌─────────────────────────────────────┐
│ 1. writing-clarifier                │
│    - 确认5要素                      │
│    - 反AI格式（默认启用）           │
│    - 询问：调研 or 直接写作？       │
└─────────────────────────────────────┘
    ↓
┌─────────────────────────────────────┐
│ 2. research-expert (可选)           │
│    - 搜集数据、案例、观点           │
└─────────────────────────────────────┘
    ↓
┌─────────────────────────────────────┐
│ 3. style-modeler (可选)             │
│    - 读取或创建风格文件             │
└─────────────────────────────────────┘
    ↓
┌─────────────────────────────────────┐
│ 4. writing-executor                 │
│    - 信息交接                       │
│    - 标题设计（3选1）               │
│    - 分步起草（开头→主体→结尾）    │
│    - 字数检查（3个节点）            │
│    - 版本保存                       │
└─────────────────────────────────────┘
    ↓
┌─────────────────────────────────────┐
│ 5. editor-review                    │
│    - AI味道检测（最高优先级）       │
│    - 结构/冗余/节奏诊断             │
└─────────────────────────────────────┘
    ↓
完成（或返回步骤4修改）
```

## 数据流

```
用户输入
    ↓
需求澄清 → 需求确认信息
    ↓
调研资料 → 数据/案例/观点
    ↓
风格建模 → 风格文件 (.claude/styles/)
    ↓
写作执行 → 信息汇总 → 草稿 → 文章文件 (articles/)
    ↓
主编审稿 → 诊断报告 → 修订建议
    ↓
最终稿 (articles/标题_最终稿.md)
```

## 扩展性

### 添加新 Skill
1. 在 `.claude/skills/` 下创建新目录
2. 创建 `SKILL.md` 文件
3. 在 `CLAUDE.MD` 中引用（如果需要）

### 添加新风格
1. 准备样本文章
2. 调用 `style-modeler` 提取风格
3. 风格文件自动保存到 `.claude/styles/`

### 自定义反AI规则
编辑 `.claude/skills/写作执行/SKILL.md` 中的"反AI写作技巧"部分。

---

**更多详情请查看各文件内的注释和文档。**
