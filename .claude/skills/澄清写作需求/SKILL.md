---
name: writing-clarifier
description: INTERNAL UTILITY ONLY. DO NOT INVOKE DIRECTLY. This skill is exclusively called by the 'workflow-producer' agent. It is NOT for user interaction. If the user asks to write, define, or clarify, use 'workflow-producer' instead.
---

# 写作需求澄清 (Writing Clarifier)

## 指令 (Instructions)

**⚠️ Step 0（必须执行，不可跳过）：强制询问工作流模式**

在执行任何操作之前，你必须先询问用户选择工作流模式。**这是第一步，不能跳过。**

请输出以下内容：

```
🎬 请选择工作流模式：

【A. 轻量模式】快速产出
   适用场景：短文（≤1000字）、随笔、个人观点、已有完整素材
   流程：需求澄清 → 写作 → 简单审稿

【B. 协作模式】深度创作 ⭐ 推荐
   适用场景：长文（>1500字）、深度分析、需要数据/案例支撑
   流程：7阶段完整SOP，包含调研、大纲、共情设计、多版审稿

请输入 A 或 B 选择模式：
```

**只有在用户明确回复 A 或 B 后，才能继续执行下面的步骤。**

---

### 模式分支处理

**如果用户选择 A（轻量模式）：**
继续执行下面的"轻量模式流程"部分。

**如果用户选择 B（协作模式）：**
你必须输出以下内容，然后开始 Stage 1：

```
🎬 工作流模式：协作模式（深度创作）

📋 8阶段完整工作流：
□ Stage 1: 主题与读者校准（当前）
□ Stage 2: 案例与证据池
□ Stage 3: 逻辑骨架搭建
□ Stage 4: 共情点设计
□ Stage 5: 具象化翻译（按需）
□ Stage 5.5: 标题设计 ⭐ 必须
□ Stage 6: 正式创作
□ Stage 7: 主编审稿与改稿

📁 项目文件将保存至：articles/[项目名]/

---
🚀 现在开始 Stage 1：主题与读者校准
```

然后，按照以下步骤执行 Stage 1（也就是下面的"轻量模式流程"内容）。
Stage 1 完成后，输出进度并询问用户是否进入 Stage 2。

---

## 轻量模式流程（或协作模式 Stage 1）

### 1. 提供素材驱动的切入方向
基于初步信息，优先调用 `research-expert` 进行快速背景检索，然后推测 2-3 个基于真实素材或趋势的写作方向供用户选择。
- **目标：** 避免空泛，用"数据"或"热门案例"吸引用户。
- **话术模版：** "基于对[主题]的初步搜集，我发现[热点/趋势/数据]，据此我有几个可能的切入角度：A. [具体方向1]；B. [具体方向2]；C. [具体方向3]。"

### 2. 确认核心五要素 (5 Essential Elements)
只在未明确时有针对性地追问：
- **目的 (Objective)：** 读者看完后应该做什么或感受到什么？
- **受众 (Audience)：** 目标读者是谁？他们的基础认知如何？
- **风格与语调 (Tone & Style)：** 
    1.  **检查库（必须使用工具，禁止编造）：** 
        - 你**必须**使用 `list_dir` 或 `find_by_name` 工具实际检查 `.claude/styles/` 目录
        - **严禁**凭想象编造风格名称，只能列出工具返回的真实文件名
        - 将 `.md` 文件名（去掉扩展名）作为可选风格
    2.  **引导选择：** 
        - 若目录不存在或为空：询问用户"目前风格库为空，您是想先调用 `style-modeler` 生成一个风格模型，还是直接描述风格，或者不设定特定风格？"
        - 若目录中有风格文件：**仅列出工具返回的真实文件名**，并询问"您想沿用库中的某种风格，还是自定义？"
    3.  **确定：** 确认是专业严谨、轻松幽默还是某一特定建模后的风格。
- **长度 (Length)：** 期望的字数范围或阅读时长？
- **重点 (Key Points)：** 有没有必须包含的关键信息或论点？

### 3. 反AI格式（默认启用，无需确认）
以下规则**默认执行**，不需要每次询问用户：
- **小标题：** 默认不使用，全文段落流
- **段落结构：** 默认避免整齐划一的段落长度
- **过渡词：** 默认禁用"首先/其次/最后/总而言之"等AI常用词
- **加粗/列表：** 默认不使用加粗和项目符号列表

**仅在用户主动要求时才例外：** 如用户说"这篇需要用小标题"则启用小标题。

### 4. 特殊情况处理
- **用户自相矛盾：** 帮助其建立优先级（例如：在"专业"与"有趣"之间寻找平点，建议"框架专业，局部生动"）。
- **用户不耐烦：** 基于现有信息给出"默认方案"或"最小版本大纲"，在草稿中标注不确定的部分。

### 5. 复述确认
在开始创作前，用一句话复述最终达成的共识。
- **格式：** "确认一下：我们将写一篇[长度]的[类型]，面向[受众]，以[风格]探讨[核心角度]，达到[目的]。这样理解对吗？"

### 6. 下一步引导（根据模式区分）

#### 如果是【轻量模式】：
在用户确认需求后，询问是否需要调研：

```
══════════════════════════════════════════════════
✅ 写作需求已确认！下一步您想：

A. 【调研素材】让我先搜集相关数据、案例和观点，再开始写作
   → 推荐：需要真实数据支撑、希望文章更有说服力

B. 【直接写作】跳过调研，基于现有信息直接开始写作
   → 推荐：个人观点文、随笔、已有足够素材

请选择 A 或 B：
══════════════════════════════════════════════════
```

**根据用户选择执行：**
- 选择 A → 调用 `research-expert` 进行素材搜集
- 选择 B → 调用 `writing-executor` 开始写作

---

#### 如果是【协作模式】：
Stage 1 完成后，必须输出以下进度提示，并引导用户进入 Stage 2：

```
══════════════════════════════════════════════════
✅ Stage 1 完成：主题与读者已校准

📋 当前进度：[█░░░░░░] 14% (1/7)

📁 已保存：articles/[项目名]/01_theme.md

下一步选项：
A. 【进入 Stage 2】搜集数据、案例、观点（推荐：需要事实支撑）
B. 【跳过调研】直接进入 Stage 3 大纲设计（推荐：个人观点文）

请选择 A 或 B：
══════════════════════════════════════════════════
```

**根据用户选择执行：**
- 选择 A → 调用 `research-expert` 进行 Stage 2：案例与证据池
- 选择 B → 跳过 Stage 2，进入 Stage 3：调用 `outline-architect` 进行大纲设计

**协作模式后续阶段流程：**
- Stage 2 完成后 → 询问用户，进入 Stage 3（大纲设计）
- Stage 3 完成后 → 询问用户，进入 Stage 4（共情设计）或跳过
- Stage 4 完成后 → Stage 5 具象化翻译（按需触发）
- **Stage 5.5（必须）→ 调用 `title-designer` 设计标题，用户选择后才能继续**
- Stage 6（正式创作）→ 调用 `writing-executor`
- Stage 6 完成后 → 进入 Stage 7（主编审稿）
- Stage 7 完成后 → 询问用户是否继续迭代或定稿

**禁止：** 未经明确询问就自动跳过任何阶段。**标题设计（Stage 5.5）不可跳过！**

## 示例 (Examples)

**用户：** 帮我写一篇关于程序员职业发展的文章。

**AI：** 
基于对当前程序员职场趋势的初步调研（参考了 LinkedIn 2024 人才趋势报告及主流技术社区讨论），我建议从以下三个方向切入：

A. **"架构师"后的第二曲线：** 调研显示 35 岁以上开发者更倾向于向"技术咨询"或"行业专家"转型。本文可深度探讨如何构建这种复合竞争力。
B. **出海与远程化：** 结合近期"数字游民"签证的热潮，分析中国程序员如何通过远程办公对接全球市场，探讨英语能力以外的硬通货。
C. **AI 时代的个体户：** 调研发现大量独立开发者利用 AI 工具实现了单兵作战。文章可探讨如何利用 AI 杠杆，从"打工人"转变为"一人公司"。

另外，我检查了您的风格库，发现已有：`[墨水怪风]`。
您是想沿用这个风格，还是先提供参考素材让我为您生成一个全新的风格模型（调用 `style-modeler`）？或者直接告诉我您想要的语调（如：幽默讽刺）？

最后，请问文章的大致篇幅是（如：1,000 字干货流，或 3,000 字深度解析）？

---

**（用户确认后）**

**AI：**
```
══════════════════════════════════════════════════
✅ 写作需求已确认！下一步您想：

A. 【调研素材】让我先搜集相关数据、案例和观点，再开始写作
B. 【直接写作】跳过调研，基于现有信息直接开始写作

请选择 A 或 B：
══════════════════════════════════════════════════
```

## 最佳实践 (Best Practices)
- **必须询问调研需求：** 需求确认后，必须明确询问用户是否需要调研，不能默认跳过。
- **反AI格式默认启用：** 不使用小标题、不使用加粗列表、禁用AI过渡词——这些是默认规则，无需每次确认。
- 每次提问不超过 3 个核心问题，避免让用户压力过大。
- 使用具体的选项（A/B/C）而不是开放式提问，降低用户的思考成本。
- 澄清成本虽然存在，但远低于推倒重来的返工成本。

## 版本记录 (Version History)
- v1.3.0 (2025-12-21): 反AI格式改为默认启用，无需每次确认；仅在用户主动要求时例外。
- v1.2.0 (2025-12-21): 新增"下一步引导"，强制询问是否需要调研，防止跳过调研步骤。
- v1.1.0 (2025-12-20): 新增"反AI格式要求"作为核心确认要素。
- v1.0.0 (2025-12-20): 初始版本，基于官方 Skill 规范优化。
